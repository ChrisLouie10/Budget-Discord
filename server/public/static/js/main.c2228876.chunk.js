(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{78:function(e,t,r){"use strict";r.r(t);var n=r(17),s=r.n(n),c=r(1),a=r.n(c),o=r(9),i=r(13),u=r(4),l=r.n(u),d=r(6),j=r(3),p=r(0);function b(){var e=Object(c.useRef)(),t=Object(c.useRef)(),r=Object(c.useRef)(),n=Object(c.useRef)(),s=Object(c.useState)(),a=Object(j.a)(s,2),u=a[0],b=a[1],h=Object(c.useState)(),m=Object(j.a)(h,2),O=m[0],f=m[1],x=Object(i.g)();function v(){return(v=Object(d.a)(l.a.mark((function s(c){return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(c.preventDefault(),r.current.value===n.current.value){s.next=3;break}return s.abrupt("return",b("Passwords do not match"));case 3:b(""),f(!0);try{fetch("http://localhost:3000/api/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.current.value,email:t.current.value,password:r.current.value})}).then((function(e){return e.json()})).then((function(e){e.success?(localStorage.setItem("Authorization",e.Authorization),x.push("/dashboard")):b(e.message)}))}finally{f(!1)}case 6:case"end":return s.stop()}}),s)})))).apply(this,arguments)}return Object(p.jsx)("div",{className:"container d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(p.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(p.jsx)("div",{className:"card",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"card-header text-center mb-4",children:Object(p.jsx)("h2",{children:"Sign Up"})}),u&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:u}),Object(p.jsxs)("form",{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(p.jsxs)("div",{className:"mb-3",id:"name",children:[Object(p.jsx)("label",{htmlFor:"input-name",children:"Name"}),Object(p.jsx)("input",{type:"name",className:"form-control",id:"input-name",ref:e,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"email",children:[Object(p.jsx)("label",{htmlFor:"input-email",children:"Email"}),Object(p.jsx)("input",{type:"email",className:"form-control",id:"input-email",ref:t,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"password",children:[Object(p.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-password",ref:r,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"password-confirm",children:[Object(p.jsx)("label",{htmlFor:"input-password-confirm",children:"Confirm Password"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-password-confirm",ref:n,required:!0})]}),Object(p.jsx)("button",{disabled:O,className:"btn btn-primary w-25",type:"Submit",children:"Submit"})]})]})}),Object(p.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(p.jsx)(o.b,{to:"/login",children:"Log In"})]})]})})}function h(e){var t=Object(c.useState)(""),r=Object(j.a)(t,2),n=r[0],s=r[1],a=Object(i.g)();function u(){return(u=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(""),e.next=3,fetch("http://localhost:3000/api/user/logout",{method:"DELETE",headers:{Authorization:localStorage.getItem("Authorization")}}).then((function(e){return e.json()})).then((function(e){e.success?(localStorage.removeItem("Authorization"),a.push("/login")):s(response.statusText)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"col-11 my-auto",children:[Object(p.jsx)("div",{className:"card mx-auto",style:{maxWidth:"400px"},children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"card-header text-center mb-4",children:Object(p.jsx)("h2",{children:"Profile"})}),n&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:n}),Object(p.jsxs)("div",{children:[Object(p.jsx)("strong",{children:"Name:"})," ",e.user.name," #",e.user.number_id]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("strong",{children:"Email:"})," ",e.user.email]}),Object(p.jsx)(o.b,{to:"/change-name",className:"btn btn-primary w-100 mt-3",children:"Change Name"}),Object(p.jsx)(o.b,{to:"/change-password",className:"btn btn-primary w-100 mt-3",children:"Change Password"}),Object(p.jsx)(o.b,{to:"/delete-account",className:"btn btn-danger w-100 mt-3",children:"Delete Account"})]})}),Object(p.jsx)("div",{className:"w-100 text-center mt-2",children:Object(p.jsx)("button",{type:"button",className:"btn btn-link",onClick:function(){return u.apply(this,arguments)},children:"Log Out"})})]})}function m(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),r=t[0],n=t[1],s=Object(c.useRef)(),a=Object(c.useRef)(),u=Object(c.useState)(),b=Object(j.a)(u,2),h=b[0],m=b[1],O=Object(c.useState)(),f=Object(j.a)(O,2),x=f[0],v=f[1],g=Object(i.g)();function S(){return(S=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,m(""),v(!0),e.next=6,fetch("http://localhost:3000/api/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.current.value,password:a.current.value})}).then((function(e){return e.json()})).then((function(e){e.success?(localStorage.setItem("Authorization",e.Authorization),g.push("/dashboard")):m(e.message)}));case 6:return e.prev=6,r&&v(!1),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[1,,6,9]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){return function(){n(!1)}}),[]),Object(p.jsx)("div",{className:"container d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(p.jsxs)("div",{className:"w-100",style:{maxWidth:"400px"},children:[Object(p.jsx)("div",{className:"card",children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"card-header text-center mb-4",children:Object(p.jsx)("h2",{children:"Log In"})}),h&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:h}),Object(p.jsxs)("form",{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(p.jsxs)("div",{className:"mb-3",id:"email",children:[Object(p.jsx)("label",{htmlFor:"input-email",children:"Email"}),Object(p.jsx)("input",{type:"email",className:"form-control",id:"input-email",ref:s,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"password",children:[Object(p.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(p.jsx)("input",{type:"password",className:"form-control",id:"input-password",ref:a,required:!0})]}),Object(p.jsx)("button",{disabled:x,className:"btn btn-primary w-25",type:"Submit",children:"Login"})]})]})}),Object(p.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(p.jsx)(o.b,{to:"/signup",children:"Sign Up"})]})]})})}var O=r(10),f=r(36);function x(e){var t=Object(c.useState)(""),r=Object(j.a)(t,2),n=r[0],s=r[1];return Object(c.useEffect)(Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.chatLogs[e.textChannelId]){t.next=3;break}return t.next=3,fetch("http://localhost:3000/api/groupServer/get-chat-log",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"get-chat-log",userId:e.user._id,textChannelId:e.textChannelId})}).then((function(e){return e.json()})).then((function(t){var r=Object(O.a)({},e.chatLogs);r[e.textChannelId]=t.chatLog,e.setChatLogs(r)}));case 3:case"end":return t.stop()}}),t)}))),[e.textChannelId]),Object(p.jsxs)("div",{className:"col-10 align-self-end w-100",style:{minHeight:"100vh",background:"#303030"},children:[function(){if(e.chatLogs[e.textChannelId])return Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-12","aria-orientation":"vertical",style:{height:"100%",position:"absolute",overflowY:"scroll"},children:Object.entries(e.chatLogs[e.textChannelId]).map((function(e){var t=Object(j.a)(e,2),r=t[0],n=t[1];return n.notSent?Object(p.jsxs)("p",{className:"ml-2 #858585",children:[n.author," (",new Date(n.timestamp).toLocaleString(),"):",Object(p.jsx)("br",{}),n.content]},r):Object(p.jsxs)("p",{className:"ml-2",style:{color:"#c2c2c2"},children:[n.author," (",new Date(n.timestamp).toLocaleString(),"):",Object(p.jsx)("br",{}),n.content]},r)}))})})}(),Object(p.jsx)("form",{className:"w-75 mb-2",style:{position:"absolute",bottom:"0"},children:Object(p.jsxs)("div",{className:"form-row",children:[Object(p.jsx)("div",{className:"col",children:Object(p.jsx)("input",{type:"text",className:"form-control ",id:"chatBox",value:n,onChange:function(e){s(e.target.value)}})}),Object(p.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(t){if(t.preventDefault(),""!==n){var r={content:n,index:Object.keys(e.chatLogs).length+1,author:e.user.name,timestamp:new Date,notSent:!0};e.chatLogs[e.textChannelId].push(r),e.sendMessage(r),s("")}},children:"Send"})]})})]})}var v=r(104),g=r(99),S=r(102);function y(e){var t=new AbortController,r=t.signal,n=Object(c.useState)(!1),s=Object(j.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)(""),u=Object(j.a)(i,2),b=u[0],h=u[1],m=Object(c.useState)("30"),f=Object(j.a)(m,2),x=f[0],v=f[1],g=Object(c.useState)("1"),S=Object(j.a)(g,2),y=S[0],N=S[1];function w(){return(w=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),o(!0),t.prev=2,t.next=5,fetch("http://localhost:3000/api/groupServer/create-invite",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"create-invite",userId:e.userId,groupServerId:e.groupServerId,expiration:parseInt(x),limit:parseInt(y)}),signal:r}).then((function(e){return e.json()})).then((function(t){if(t.success){h("http://localhost:5000/join/"+t.code);var r=Object(O.a)({},e.groupServers);r[e.groupServerId].inviteCode=t.code,e.setGroupServers(Object(O.a)({},r))}}));case 5:return t.prev=5,o(!1),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[2,,5,8]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){return e.groupServers[e.groupServerId].inviteCode&&h("http://localhost:5000/join/"+e.groupServers[e.groupServerId].inviteCode),function(){t.abort()}}),[]),Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"expire",children:"Expire After"}),Object(p.jsxs)("select",{id:"expire",value:x,onChange:function(e){v(e.target.value)},className:"form-control",children:[Object(p.jsx)("option",{value:"30",children:"30 minutes"}),Object(p.jsx)("option",{value:"60",children:"1 hour"}),Object(p.jsx)("option",{value:"360",children:"6 hours"}),Object(p.jsx)("option",{value:"720",children:"12 hours"}),Object(p.jsx)("option",{value:"1440",children:"1 day"}),Object(p.jsx)("option",{value:"-1",children:"Never"})]}),Object(p.jsx)("label",{htmlFor:"limit",children:"Max number of uses"}),Object(p.jsxs)("select",{id:"limit",value:y,onChange:function(e){N(e.target.value)},className:"form-control",children:[Object(p.jsx)("option",{value:"1",children:"1"}),Object(p.jsx)("option",{value:"5",children:"5"}),Object(p.jsx)("option",{value:"10",children:"10"}),Object(p.jsx)("option",{value:"50",children:"50"}),Object(p.jsx)("option",{value:"100",children:"100"}),Object(p.jsx)("option",{value:"-1",children:"No Limit"})]})]}),Object(p.jsx)("button",{type:"submit",disabled:a,className:"btn btn-primary",onClick:function(e){return w.apply(this,arguments)},children:"Generate New Invite Link"}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"invite",children:"Invite Link"}),Object(p.jsx)("input",{className:"form-control",type:"text",value:b,onChange:function(e){h(e.target.value)},readOnly:!0})]})]})}function N(e){var t=new AbortController,r=t.signal,n=Object(c.useState)("new-channel"),s=Object(j.a)(n,2),a=s[0],o=s[1],u=Object(c.useState)(!1),b=Object(j.a)(u,2),h=b[0],m=b[1],f=Object(i.g)();function x(){return(x=Object(d.a)(l.a.mark((function t(n){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),m(!0),t.prev=2,t.next=5,fetch("http://localhost:3000/api/groupServer/create-channel",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"create-channel",name:a,userId:e.userId,groupServerId:e.groupServerId}),signal:r}).then((function(e){return e.json()})).then((function(t){if(t.success){var r=Object(O.a)({},e.groupServers);s=t.textChannelId,r[e.groupServerId].textChannels[s]=t.textChannel,e.setGroupServers(Object(O.a)({},r)),m(!1),e.setOpenPopup(!1)}}));case 5:return t.prev=5,s?f.push("/group/"+e.groupServerId+"/"+s):f.push("/dashboard"),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[2,,5,8]])})))).apply(this,arguments)}Object(c.useEffect)((function(){return function(){t.abort()}}),[]);return Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"createServerInput",children:"Group Server Name"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"createServerInput","aria-describedby":"serverInputHelp",value:a,onChange:function(e){o(e.target.value)}})]}),Object(p.jsx)("button",{type:"submit",disabled:h,className:"btn btn-primary",onClick:function(e){return x.apply(this,arguments)},children:"Create"})]})}function w(e){var t=new AbortController,r=t.signal,n=Object(i.g)(),s=Object(c.useState)(e.groupServers[e.groupServerId].textChannels[e.textChannelId].name),a=Object(j.a)(s,1)[0],o=Object(c.useState)(""),u=Object(j.a)(o,2),b=u[0],h=u[1],m=Object(c.useState)(!0),f=Object(j.a)(m,2),x=f[0],v=f[1],g=Object(c.useState)(!1),S=Object(j.a)(g,2),y=S[0],N=S[1];function w(){return(w=Object(d.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=Object.keys(e.groupServers[e.groupServerId].textChannels).length,!(x&&s>1)){t.next=5;break}return N(!0),t.next=5,fetch("http://localhost:3000/api/groupServer/delete-channel",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"delete-channel",groupServerId:e.groupServerId,textChannelId:e.textChannelId,userId:e.userId}),signal:r}).then((function(e){return e.json()})).then((function(t){if(t.success){n.push("/dashboard");var r=Object(O.a)({},e.groupServers);delete r[e.groupServerId].textChannels[e.textChannelId],e.setGroupServers(Object(O.a)({},r))}else console.log(t.message)}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){return function(){v(!1),t.abort()}}),[]),Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("p",{children:['Type "',a,'" to confirm deletion']}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"deleteInput",value:b,onChange:function(e){h(e.target.value)}})]}),Object(p.jsx)("button",{type:"submit",disabled:y,className:"btn btn-danger",onClick:function(e){e.preventDefault(),b===a&&function(){w.apply(this,arguments)}()},children:"Confirm"})]})}function I(e){var t=new AbortController,r=t.signal,n=Object(c.useState)(!0),s=Object(j.a)(n,2),a=s[0],o=s[1],u=Object(i.g)(),b=Object(c.useState)(""),h=Object(j.a)(b,2),m=h[0],f=h[1],x=Object(c.useState)(!1),v=Object(j.a)(x,2),g=v[0],S=v[1];function y(){return(y=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.groupServerId||!a){t.next=4;break}return S(!0),t.next=4,fetch("http://localhost:3000/api/groupServer/delete",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"delete",groupServerId:e.groupServerId,userId:e.userId}),signal:r}).then((function(e){return e.json()})).then((function(t){if(t.success){u.push("/dashboard");var r=Object(O.a)({},e.groupServers);delete r[e.groupServerId],e.setGroupServers(Object(O.a)({},r))}else console.log(t.message)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){return function(){o(!1),t.abort()}}),[]),Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("p",{children:['Type "',e.groupServerName,'" to confirm deletion']}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"deleteInput",value:m,onChange:function(e){f(e.target.value)}})]}),Object(p.jsx)("button",{type:"submit",disabled:g,className:"btn btn-danger",onClick:function(t){t.preventDefault(),m===e.groupServerName&&function(){y.apply(this,arguments)}()},children:"Confirm"})]})}function C(e){var t=new AbortController,r=t.signal,n=Object(c.useState)(!0),s=Object(j.a)(n,2),a=s[0],o=s[1],u=Object(i.g)(),b=Object(c.useState)(!1),h=Object(j.a)(b,2),m=h[0],f=h[1];function x(){return(x=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.groupServerId||!a){t.next=4;break}return f(!0),t.next=4,fetch("http://localhost:3000/api/groupServer/leave",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"leave",groupServerId:e.groupServerId,userId:e.userId}),signal:r}).then((function(e){return e.json()})).then((function(t){if(t.success&&a){u.push("/dashboard");var r=Object(O.a)({},e.groupServers);delete r[e.groupServerId],e.setGroupServers(Object(O.a)({},r)),e.setUser(t.user)}else console.log(t.message)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){return function(){o(!1),t.abort()}}),[]),Object(p.jsxs)("form",{children:[Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("p",{children:["Are you sure you want to leave ",e.groupServerName,"? You won't be able to rejoin unless you are re-invited."]})}),Object(p.jsx)("button",{type:"submit",disabled:m,className:"btn",onClick:function(t){t.preventDefault(),e.setOpenPopup(!1)},children:"Cancel"}),Object(p.jsx)("button",{type:"submit",disabled:m,className:"btn btn-danger",onClick:function(e){e.preventDefault(),function(){x.apply(this,arguments)}()},children:"Leave"})]})}function A(e){var t=e.openPopup,r=e.setOpenPopup;return Object(p.jsx)(S.a,{open:t,maxWidth:"md",onEscapeKeyDown:function(){r(!1)},children:0===e.actionDialog?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v.a,{children:Object(p.jsx)("div",{children:"Actions"})}),Object(p.jsx)(g.a,{children:Object(p.jsxs)("ul",{className:"list-unstyled",children:[e.groupServers[e.groupServerId].owner||e.groupServers[e.groupServerId].admin?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("li",{onClick:function(){return e.setActionDialog(1)},children:Object(p.jsx)("a",{className:"text-reset",role:"button",children:"Invite"})}),Object(p.jsx)("li",{onClick:function(){return e.setActionDialog(2)},children:Object(p.jsx)("a",{className:"text-reset",role:"button",children:"Create Channel"})}),Object(p.jsx)("li",{onClick:function(){return e.setActionDialog(3)},children:Object(p.jsx)("a",{className:"text-reset",role:"button",children:"Delete Current Channel"})}),Object(p.jsx)("li",{onClick:function(){return e.setActionDialog(4)},children:Object(p.jsx)("a",{className:"text-reset",role:"button",children:"Delete Group Server"})})]}):Object(p.jsx)(p.Fragment,{}),e.groupServers[e.groupServerId].owner?Object(p.jsx)(p.Fragment,{}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("li",{onClick:function(){return e.setActionDialog(5)},children:Object(p.jsx)("a",{className:"text-reset",role:"button",children:"Leave Group Server"})})})]})})]}):1===e.actionDialog?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v.a,{children:Object(p.jsx)("div",{children:"Invite"})}),Object(p.jsx)(g.a,{children:Object(p.jsx)(y,{userId:e.user._id,groupServers:e.groupServers,setGroupServers:e.setGroupServers,groupServerId:e.groupServerId})})]}):2===e.actionDialog?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v.a,{children:Object(p.jsx)("div",{children:"Create Channel"})}),Object(p.jsx)(g.a,{children:Object(p.jsx)(N,{userId:e.user._id,groupServerId:e.groupServerId,groupServers:e.groupServers,setGroupServers:e.setGroupServers,setOpenPopup:e.setOpenPopup})})]}):3===e.actionDialog?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v.a,{children:Object(p.jsx)("div",{children:"Delete Current Channel"})}),Object(p.jsx)(g.a,{children:Object(p.jsx)(w,{userId:e.user._id,textChannelId:e.textChannelId,groupServerId:e.groupServerId,groupServers:e.groupServers,setGroupServers:e.setGroupServers})})]}):4===e.actionDialog?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v.a,{children:Object(p.jsx)("div",{children:"Delete Group Server"})}),Object(p.jsx)(g.a,{children:Object(p.jsx)(I,{userId:e.user._id,groupServers:e.groupServers,setGroupServers:e.setGroupServers,groupServerId:e.groupServerId,groupServerName:e.groupServerName})})]}):5===e.actionDialog?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v.a,{children:Object(p.jsxs)("div",{children:["Leave ",e.groupServerName]})}),Object(p.jsx)(g.a,{children:Object(p.jsx)(C,{userId:e.user._id,setUser:e.setUser,groupServers:e.groupServers,setGroupServers:e.setGroupServers,groupServerId:e.groupServerId,groupServerName:e.groupServerName,setOpenPopup:e.setOpenPopup})})]}):void 0})}function k(e){var t=Object(c.useState)(!0),r=Object(j.a)(t,2),n=r[0],s=r[1],a=Object(c.useState)("Group Server"),i=Object(j.a)(a,2),u=i[0],l=i[1],d=Object(c.useState)(0),b=Object(j.a)(d,2),h=b[0],m=b[1],O=Object(c.useState)(!1),f=Object(j.a)(O,2),x=f[0],v=f[1];function g(e){3!==e.nativeEvent.which&&"contextmenu"!==e.type||e.preventDefault()}return Object(c.useEffect)((function(){return function(){s(!1)}}),[]),Object(c.useEffect)((function(){e.groupServers&&l(e.groupServers[e.groupServerId].name)}),[e.groupServerId]),Object(p.jsxs)("nav",{id:"server-side-bar",children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("h5",{className:"text-white",children:u})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("ul",{className:"list-unstyled text-white",children:[Object(p.jsxs)("li",{onClick:function(){x||(v(!0),m(0))},children:[Object(p.jsx)(o.b,{className:"text-reset",to:"#",children:"Actions"}),Object(p.jsx)(A,{mounted:n,openPopup:x,setOpenPopup:v,actionDialog:h,setActionDialog:m,user:e.user,setUser:e.setUser,groupServerName:u,groupServers:e.groupServers,setGroupServers:e.setGroupServers,groupServerId:e.groupServerId,textChannelId:e.textChannelId})]}),function(){if(e.groupServers[e.groupServerId])return Object(p.jsx)(p.Fragment,{children:Object.entries(e.groupServers[e.groupServerId].textChannels).map((function(t){var r=Object(j.a)(t,2),n=r[0],s=r[1];return Object(p.jsx)("li",{children:e.textChannelId===n?Object(p.jsx)(o.b,{style:{color:"#b5fff3"},onContextMenu:g,to:{pathname:"/group/"+e.groupServerId+"/"+n},children:s.name}):Object(p.jsx)(o.b,{className:"text-reset",onContextMenu:g,to:{pathname:"/group/"+e.groupServerId+"/"+n},children:s.name})},n)}))})}()]})})]})}function D(e){var t=Object(c.useState)(!0),r=Object(j.a)(t,2),n=r[0],s=r[1],a=Object(c.useState)(!0),o=Object(j.a)(a,2),u=o[0],b=o[1],h=Object(c.useState)(!1),m=Object(j.a)(h,2),O=m[0],f=m[1];return Object(c.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(function(){s(!1)}));case 1:case"end":return e.stop()}}),e)}))),[]),Object(c.useEffect)(Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=9;break}return t.prev=1,t.next=4,fetch("http://localhost:3000/api/groupServer/verify",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"verify",userId:e.user._id,groupServerId:e.computedMatch.params.groupServerId,textChannelId:e.computedMatch.params.textChannelId?e.computedMatch.params.textChannelId:Object.keys(e.groupServers[groupServerId].textChannels)[0]})}).then((function(e){return e.json()})).then(function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&f(t.access);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return t.prev=4,n&&b(!1),t.finish(4);case 7:t.next=10;break;case 9:f(!1);case 10:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),[e.computedMatch.params.groupServerId]),Object(p.jsx)(p.Fragment,{children:u?Object(p.jsx)("p",{children:"Loading"}):O?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"col-1",style:{minHeight:"100vh",background:"#292929"},children:Object(p.jsx)(k,{user:e.user,setUser:e.setUser,groupServers:e.groupServers,setGroupServers:e.setGroupServers,groupServerId:e.computedMatch.params.groupServerId,textChannelId:e.computedMatch.params.textChannelId?e.computedMatch.params.textChannelId:Object.keys(e.groupServers[e.computedMatch.params.groupServerId].textChannels)[0]})}),Object(p.jsx)(x,{sendMessage:function(t){var r=e.computedMatch.params.groupServerId,n=e.computedMatch.params.textChannelId?e.computedMatch.params.textChannelId:Object.keys(e.groupServers[r].textChannels)[0];e.sendMessage(t,r,n)},chatLogs:e.chatLogs,setChatLogs:e.setChatLogs,textChannelId:e.computedMatch.params.textChannelId?e.computedMatch.params.textChannelId:Object.keys(e.groupServers[e.computedMatch.params.groupServerId].textChannels)[0],user:e.user})]}):Object(p.jsx)(i.a,{to:"/dashboard"})})}function P(){return Object(p.jsxs)("div",{className:"d-flex justify-content-center align-items-center flex-column bg-secondary",style:{height:"100vh"},children:[Object(p.jsx)("h1",{className:"text-light",children:"Loading..."}),Object(p.jsx)("div",{className:"spinner-border",style:{width:"20rem",height:"20rem",color:"whitesmoke"},role:"status",children:Object(p.jsx)("span",{className:"sr-only",children:"Loading..."})})]})}function E(e){var t=new AbortController,r=t.signal,n=Object(i.g)();return Object(c.useEffect)(Object(d.a)(l.a.mark((function s(){var c;return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e.computedMatch.params.inviteCode){s.next=3;break}return s.next=3,fetch("http://localhost:3000/api/groupServer/join",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"join",inviteCode:e.computedMatch.params.inviteCode,userId:e.user._id}),signal:r}).then((function(e){return e.json()})).then((function(t){if(t.success){c=t.groupServerId;var r=Object(O.a)({},e.groupServers);r[c]=t.groupServer,e.setGroupServers(Object(O.a)({},r)),n.push("/group/"+c)}else console.log(t.message),n.push("/dashboard")}));case 3:return s.abrupt("return",(function(){t.abort()}));case 4:case"end":return s.stop()}}),s)}))),[]),Object(p.jsx)(P,{})}function T(e){var t=e.title,r=e.children,n=e.openPopup,s=e.setOpenPopup,c=Object(f.a)(e,["title","children","openPopup","setOpenPopup"]);return Object(p.jsxs)(S.a,{open:n,maxWidth:"md",onEscapeKeyDown:function(){s(!1)},children:[Object(p.jsx)(v.a,{children:Object(p.jsx)("div",{children:t})}),Object(p.jsx)(g.a,{children:a.a.cloneElement(r,{openPopup:n,setOpenPopup:s,others:c})})]})}function z(e){var t=new AbortController,r=t.signal,n=Object(c.useState)(e.user.name+"'s Server"),s=Object(j.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)(!1),u=Object(j.a)(i,2),b=u[0],h=u[1];function m(){return(m=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),h(!0);try{fetch("http://localhost:3000/api/groupServer/create",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"create",name:a,userId:e.user._id}),signal:r}).then((function(e){return e.json()})).then((function(t){if(t.success){var r=Object(O.a)({},e.groupServers);r[t.groupServerId]=t.groupServer,e.setGroupServers(Object(O.a)({},r))}}))}finally{h(!1),e.setOpenPopup(!1)}case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(c.useEffect)((function(){return function(){t.abort()}}),[]);return Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"createServerInput",children:"Group Server Name"}),Object(p.jsx)("input",{type:"text",className:"form-control",id:"createServerInput","aria-describedby":"serverInputHelp",value:a,onChange:function(e){o(e.target.value)}})]}),Object(p.jsx)("button",{type:"submit",disabled:b,className:"btn btn-primary",onClick:function(e){return m.apply(this,arguments)},children:"Create"})]})}function F(e){var t=Object(c.useState)(!1),r=Object(j.a)(t,2),n=r[0],s=r[1];return Object(p.jsx)("div",{className:"wrapper w-100",children:Object(p.jsxs)("nav",{id:"sidebar",children:[Object(p.jsx)("div",{children:Object(p.jsx)("h5",{className:"text-white",children:"Budget-Discord"})}),Object(p.jsxs)("ul",{className:"list-unstyled text-white",children:[Object(p.jsx)("li",{children:Object(p.jsx)(o.b,{className:"text-reset",to:"/dashboard",children:"Dashboard"})}),Object(p.jsx)("li",{children:Object(p.jsx)(o.b,{className:"text-reset",to:"/friends",children:"Friends"})}),function(){if(e.groupServers)return Object(p.jsx)(p.Fragment,{children:Object.entries(e.groupServers).map((function(t){var r=Object(j.a)(t,2),n=r[0],s=r[1];if(s){var c=Object.keys(s.textChannels)[0];return Object(p.jsx)("li",{children:e.groupServerId===n?Object(p.jsx)(o.b,{onClick:function(e){return e.preventDefault()},style:{color:"#b5fff3"},to:{pathname:"/group/"+n+"/"+c},children:s.name}):Object(p.jsx)(o.b,{className:"text-reset",to:{pathname:"/group/"+n+"/"+c},children:s.name})},n)}}))})}(),Object(p.jsxs)("li",{onClick:function(){n||s(!0)},children:[Object(p.jsx)(o.b,{className:"text-reset",to:"#",children:"Create Server"}),Object(p.jsx)(T,{title:"Create New Server",openPopup:n,setOpenPopup:s,children:Object(p.jsx)(z,{user:e.user,groupServers:e.groupServers,setGroupServers:e.setGroupServers})})]})]})]})})}r(45).config();var G=new WebSocket("ws://localhost:1000");function L(e){var t=e.component,r=Object(f.a)(e,["component"]),n=new AbortController,s=n.signal,a=Object(c.useState)(!1),o=Object(j.a)(a,2),u=o[0],b=o[1],h=Object(c.useState)(!0),m=Object(j.a)(h,2),x=m[0],v=m[1],g=Object(c.useState)(!0),S=Object(j.a)(g,2),y=S[0],N=S[1],w=Object(c.useState)({}),I=Object(j.a)(w,2),C=I[0],A=I[1],k=Object(c.useState)(),T=Object(j.a)(k,2),z=T[0],L=T[1],M=Object(c.useRef)(z),J=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M.current=t,L(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=Object(c.useState)({}),q=Object(j.a)(R,2),U=q[0],W=q[1],_=Object(c.useRef)(U),H=function(e){_.current=e,W(e)};function B(e,t){G&&(G.readyState===WebSocket.OPEN?e():setTimeout((function(){B(e,t)}),t))}function K(e){if(y){var t;try{t=JSON.parse(e.data)}catch(s){return void console.log("Message from wss could not be parsed!",e)}if("message"===t.type){var r=Object(O.a)({},_.current),n=r[t.textChannelId].length-1;r[t.textChannelId][n]=t.message,H(Object(O.a)({},r))}}}function Y(e,t,r){if(y){var n={type:"message",textChannelId:r,serverId:t,message:e};B((function(){G.send(JSON.stringify(n))}),500)}}return Object(c.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G&&G.addEventListener("message",K),e.next=3,fetch("http://localhost:3000/api/user/verify",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")}}).then((function(e){if(y)return e.json()})).then((function(e){y&&(J(e.user),b(e.success)),e.success||console.log(e.message)})).catch((function(e){return y?b(!1):null}));case 3:return e.next=5,fetch("http://localhost:3000/api/groupServer/find",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({type:"find",userId:M.current._id}),signal:s}).then((function(e){if(y)return e.json()})).then((function(e){e.success?A(Object(O.a)({},e.groupServers)):console.log(e.message)}));case 5:return v(!1),e.abrupt("return",(function(){N(!1),n.abort()}));case 7:case"end":return e.stop()}}),e)}))),[]),x?Object(p.jsx)(P,{}):Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsx)(i.b,Object(O.a)(Object(O.a)({},r),{},{render:function(e){return u?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"col-1",style:{minHeight:"100vh",background:"#212121"},children:Object(p.jsx)(F,{user:z,setUser:J,groupServerId:r.computedMatch.params.groupServerId,groupServers:C,setGroupServers:A})}),Object(p.jsx)(t,Object(O.a)(Object(O.a)({},r),{},{groupServers:t===D||t===E?C:void 0,setGroupServers:t===D||t===E?A:void 0,chatLogs:t===D?U:void 0,setChatLogs:t===D?H:void 0,sendMessage:t===D?Y:void 0,user:z,setUser:J,props:e}))]}):Object(p.jsx)(i.a,{to:"/login"})}}))})})}var M=r(101),J=r(103),R=r(100);function q(e){var t=Object(c.useState)(!1),r=Object(j.a)(t,2),n=r[0],s=r[1],a=Object(c.useState)(!1),o=Object(j.a)(a,2),i=o[0],u=o[1];function b(){return(b=Object(d.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setError(""),r.preventDefault(),t.prev=2,s(!0),t.next=6,fetch("http://localhost:3000/api/friends/accept-friend-request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({friendID:e.friend.id})}).then((function(e){return e.json()})).then((function(t){t.success?console.log(t.message):e.setError(t.message)}));case 6:u(!0);case 7:return t.prev=7,s(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[2,,7,10]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"d-flex m-2 mx-auto",style:{maxWidth:"800px"},children:[Object(p.jsxs)("p",{className:"mr-auto p-2",children:[e.friend.name," #",e.friend.numberID," "]}),Object(p.jsx)("button",{disabled:n||i,className:"btn btn-primary",onClick:function(e){return b.apply(this,arguments)},children:i?"Accepted":"Accept Friend Request"})]})}function U(e){var t=Object(c.useState)(!1),r=Object(j.a)(t,2),n=r[0],s=r[1],a=Object(c.useState)(!1),o=Object(j.a)(a,2),i=o[0],u=o[1];function b(){return(b=Object(d.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,e.setError(""),s(!0),t.next=6,fetch("http://localhost:3000/api/friends/delete-friend",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({friendID:e.friend.id})}).then((function(e){return e.json()})).then((function(t){t.success?console.log(t.message):e.setError(t.message)}));case 6:u(!0);case 7:return t.prev=7,s(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"d-flex m-2 mx-auto",style:{maxWidth:"800px"},children:[Object(p.jsxs)("p",{className:"mr-auto p-2",children:[e.friend.name," #",e.friend.numberID," "]}),Object(p.jsx)("button",{disabled:n||i,className:"btn btn-primary",onClick:function(e){return b.apply(this,arguments)},children:i?"Removed":"Remove Friend"})]},e.friend.id)}function W(e){var t=Object(c.useState)(!1),r=Object(j.a)(t,2),n=r[0],s=r[1],a=Object(c.useState)(!1),o=Object(j.a)(a,2),i=o[0],u=o[1];function b(){return(b=Object(d.a)(l.a.mark((function t(r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),t.prev=1,e.setError(""),s(!0),t.next=6,fetch("http://localhost:3000/api/friends/send-friend-request",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({friendID:e.friend.id})}).then((function(e){return e.json()})).then((function(t){t.success?console.log(t.message):e.setError(t.message)}));case 6:u(!0);case 7:return t.prev=7,s(!1),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[1,,7,10]])})))).apply(this,arguments)}return console.log(e.props),Object(p.jsxs)("div",{className:"d-flex m-2",children:[Object(p.jsxs)("p",{className:"mr-auto p-2",children:[e.friend.name," #",e.friend.numberID," "]}),Object(p.jsx)("button",{disabled:n||i,className:"btn btn-primary",onClick:function(e){return b.apply(this,arguments)},children:i?"Added":"AddFriend"})]})}function _(e){var t=Object(c.useRef)(),r=Object(c.useRef)(),n=Object(c.useState)([]),s=Object(j.a)(n,2),a=s[0],o=s[1],i=Object(c.useState)([]),u=Object(j.a)(i,2),b=u[0],h=u[1],m=Object(c.useState)(!1),O=Object(j.a)(m,2),f=O[0],x=O[1],v=Object(c.useState)([]),g=Object(j.a)(v,2),S=g[0],y=g[1],N=Object(c.useState)(),w=Object(j.a)(N,2),I=w[0],C=w[1],A=Object(c.useState)(),k=Object(j.a)(A,2),D=k[0],P=k[1];function E(){return(E=Object(d.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,C(""),P(!0),h([]),e.next=7,fetch("http://localhost:3000/api/friends/find-users",{method:"POST",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({friendName:t.current.value,friendNumber:r.current.value})}).then((function(e){return e.json()})).then((function(e){e.success?0==e.friendResult.length?C("No Users found"):h(e.friendResult):C(e.message)}));case 7:return e.prev=7,P(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])})))).apply(this,arguments)}return Object(c.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!1),e.next=3,fetch("http://localhost:3000/api/friends/get-friend-requests",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")}}).then((function(e){return e.json()})).then((function(e){e.success?y(e.friendRequests):C(e.message)}));case 3:return e.next=5,fetch("http://localhost:3000/api/friends/get-friends",{method:"GET",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")}}).then((function(e){return e.json()})).then((function(e){e.success?o(e.friends):C(e.message)}));case 5:x(!0);case 6:case"end":return e.stop()}}),e)}))),[]),Object(p.jsxs)("div",{className:"col-11 my-auto bg-secondary d-flex-column",style:{minHeight:"100vh"},children:[f?a.map((function(e){return Object(p.jsx)(U,{setError:C,friend:e},e.id)})):Object(p.jsx)("div",{}),Object(p.jsx)("hr",{}),f?S.map((function(e){return Object(p.jsx)(q,{setError:C,friend:e},e.id)})):Object(p.jsx)("div",{children:" "}),Object(p.jsx)("div",{className:"card mx-auto",style:{maxWidth:"400px"},children:Object(p.jsxs)("div",{className:"card-body bg-light",children:[Object(p.jsx)("div",{className:"card-header text-center mb-4",children:Object(p.jsx)("h2",{children:"Find Friend"})}),I&&Object(p.jsx)(M.a,{variant:"danger",children:I}),Object(p.jsxs)(J.a,{onSubmit:function(e){return E.apply(this,arguments)},children:[Object(p.jsxs)(J.a.Group,{id:"friend",children:[Object(p.jsx)(J.a.Label,{children:"Enter Friend's Name"}),Object(p.jsx)(J.a.Control,{type:"text",ref:t})]}),Object(p.jsxs)(J.a.Group,{id:"number_id",children:[Object(p.jsx)(J.a.Label,{children:"Enter Friend's Number ID (Optional)"}),Object(p.jsx)(J.a.Control,{type:"text",ref:r})]}),Object(p.jsx)(R.a,{disabled:D,className:"w-25",type:"Submit",children:"Find"})]})]})}),Object(p.jsx)("div",{className:"mx-auto",style:{maxWidth:"800px"},children:b.map((function(e){return Object(p.jsx)(W,{setError:C,friend:e},e.id)}))})]})}function H(e){var t=Object(c.useState)(e.user),r=Object(j.a)(t,2),n=(r[0],r[1],Object(c.useRef)()),s=Object(c.useRef)(),a=Object(c.useState)(),u=Object(j.a)(a,2),b=u[0],h=u[1],m=Object(c.useState)(),O=Object(j.a)(m,2),f=O[0],x=O[1],v=Object(i.g)();function g(){return(g=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,x(!0),e.next=5,fetch("http://localhost:3000/api/user/change-name",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({name:n.current.value,password:s.current.value})}).then((function(e){return e.json()})).then((function(e){e.success?v.push("/dashboard"):h(e.message)}));case 5:return e.prev=5,x(!1),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[1,,5,8]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"col-11 my-auto",children:[Object(p.jsx)("div",{className:"card mx-auto",style:{maxWidth:"400px"},children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"card-header text-center mb-4",children:Object(p.jsx)("h2",{children:"Change Name"})}),b&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:b}),Object(p.jsxs)("form",{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(p.jsxs)("div",{className:"mb-3",id:"old-password",children:[Object(p.jsx)("label",{htmlFor:"input-old-password",children:"Name"}),Object(p.jsx)("input",{className:"form-control",type:"name",id:"input-name",ref:n,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"password",children:[Object(p.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-password",ref:s,required:!0})]}),Object(p.jsx)("button",{disabled:f,className:"btn btn-primary w-25",type:"Submit",children:"Update"})]})]})}),Object(p.jsx)("div",{className:"w-100 text-center mt-2",children:Object(p.jsx)(o.b,{to:"/dashboard",children:"Cancel"})})]})}function B(e){var t=Object(c.useState)(e.user),r=Object(j.a)(t,2),n=(r[0],r[1],Object(c.useRef)()),s=Object(c.useRef)(),a=Object(c.useState)(),u=Object(j.a)(a,2),b=u[0],h=u[1],m=Object(c.useState)(),O=Object(j.a)(m,2),f=O[0],x=O[1],v=Object(i.g)();function g(){return(g=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.current.value===s.current.value){e.next=3;break}return e.abrupt("return",h("Passwords do not match"));case 3:return e.prev=3,x(!0),e.next=7,fetch("http://localhost:3000/api/user/delete-account",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({password:n.current.value})}).then((function(e){return e.json()})).then((function(e){e.success?v.push("/login"):h(e.message)}));case 7:return e.prev=7,x(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"col-11 my-auto",children:[Object(p.jsx)("div",{className:"card mx-auto",style:{maxWidth:"400px"},children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"card-header text-center mb-4",children:Object(p.jsx)("h2",{children:"Delete Account"})}),b&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:b}),Object(p.jsxs)("form",{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(p.jsxs)("div",{className:"mb-3",id:"password",children:[Object(p.jsx)("label",{htmlFor:"input-password",children:"Enter Password to Delete Account"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-password",ref:n,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"password-confirm",children:[Object(p.jsx)("label",{htmlFor:"input-password-confirm",children:"Confirm Password"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-password-confirm",ref:s,required:!0})]}),Object(p.jsx)("button",{disabled:f,className:"btn btn-primary w-25",type:"Submit",children:"Update"})]})]})}),Object(p.jsx)("div",{className:"w-100 text-center mt-2",children:Object(p.jsx)(o.b,{to:"/dashboard",children:"Cancel"})})]})}function K(e){var t=Object(c.useState)(e.user),r=Object(j.a)(t,2),n=r[0],s=(r[1],Object(c.useRef)()),a=Object(c.useRef)(),u=Object(c.useRef)(),b=Object(c.useState)(),h=Object(j.a)(b,2),m=h[0],O=h[1],f=Object(c.useState)(),x=Object(j.a)(f,2),v=x[0],g=x[1],S=Object(i.g)();function y(){return(y=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.current.value===u.current.value){e.next=3;break}return e.abrupt("return",O("Passwords do not match"));case 3:return e.prev=3,g(!0),e.next=7,fetch("http://localhost:3000/api/user/change-password",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:localStorage.getItem("Authorization")},body:JSON.stringify({email:n.email,oldPassword:s.current.value,password:a.current.value})}).then((function(e){return e.json()})).then((function(e){e.success?S.push("/dashboard"):O(e.message)}));case 7:return e.prev=7,g(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))).apply(this,arguments)}return Object(p.jsxs)("div",{className:"col-11 my-auto",children:[Object(p.jsx)("div",{className:"card mx-auto",style:{maxWidth:"400px"},children:Object(p.jsxs)("div",{className:"card-body",children:[Object(p.jsx)("div",{className:"card-header text-center mb-4",children:Object(p.jsx)("h2",{children:"Update Profile"})}),m&&Object(p.jsx)("div",{className:"alert alert-danger",role:"alert",children:m}),Object(p.jsxs)("form",{onSubmit:function(e){return y.apply(this,arguments)},children:[Object(p.jsxs)("div",{className:"mb-3",id:"old-password",children:[Object(p.jsx)("label",{htmlFor:"input-old-password",children:"Old Password"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-old-password",ref:s,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"password",children:[Object(p.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-password",ref:a,required:!0})]}),Object(p.jsxs)("div",{className:"mb-3",id:"password-confirm",children:[Object(p.jsx)("label",{htmlFor:"input-password-confirm",children:"Confirm Password"}),Object(p.jsx)("input",{className:"form-control",type:"password",id:"input-password-confirm",ref:u,required:!0})]}),Object(p.jsx)("button",{disabled:v,className:"btn btn-primary w-25",type:"Submit",children:"Update"})]})]})}),Object(p.jsx)("div",{className:"w-100 text-center mt-2",children:Object(p.jsx)(o.b,{to:"/dashboard",children:"Cancel"})})]})}function Y(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(o.a,{children:Object(p.jsxs)(i.d,{children:[Object(p.jsx)(L,{exact:!0,path:"/",component:h}),Object(p.jsx)(L,{exact:!0,path:"/friends",component:_}),Object(p.jsx)(L,{exact:!0,path:"/dashboard",component:h}),Object(p.jsx)(L,{exact:!0,path:"/change-name",component:H}),Object(p.jsx)(L,{exact:!0,path:"/change-password",component:K}),Object(p.jsx)(L,{exact:!0,path:"/delete-account",component:B}),Object(p.jsx)(L,{exact:!0,path:"/group/:groupServerId",component:D}),Object(p.jsx)(L,{exact:!0,path:"/group/:groupServerId/:textChannelId",component:D}),Object(p.jsx)(L,{exact:!0,path:"/join/:inviteCode",component:E}),Object(p.jsx)(i.b,{path:"/signup",component:b}),Object(p.jsx)(i.b,{path:"/login",component:m})]})})})}r(77);r(45).config(),s.a.render(Object(p.jsx)(Y,{}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.c2228876.chunk.js.map